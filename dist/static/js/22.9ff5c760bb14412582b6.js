webpackJsonp([22],{"0OxJ":function(t,e){},KTZc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("IHPB"),i=a.n(s),r=a("lC5x"),n=a.n(r),l=a("HzJ8"),c=a.n(l),o=a("J0Oq"),h=a.n(o),d=(a("glag"),a("c2Ch")),u={name:"points",created:function(){var t=h()(n.a.mark(function t(){var e,a,s,i,r,l,o,h,u,v,f,p,b,m,k,x;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$store.getters.warn_change,this.title=e.warnName,e.isDefaults&&(this.defaults=!0),!e.id){t.next=53;break}return this.createdInfo.id=e.id,t.next=7,Object(d.V)({id:e.id});case 7:if(1!==(a=t.sent).status){t.next=53;break}if(this.hasCheckList=a.msg,!this.hasCheckList.default){t.next=30;break}for(s=!0,i=!1,r=void 0,t.prev=14,l=c()(this.hasCheckList.default);!(s=(o=l.next()).done);s=!0)h=o.value,this.checkList.push(h.warnNode);t.next=22;break;case 18:t.prev=18,t.t0=t.catch(14),i=!0,r=t.t0;case 22:t.prev=22,t.prev=23,!s&&l.return&&l.return();case 25:if(t.prev=25,!i){t.next=28;break}throw r;case 28:return t.finish(25);case 29:return t.finish(22);case 30:if(!this.hasCheckList.custom){t.next=52;break}for(u=!0,v=!1,f=void 0,t.prev=34,p=c()(this.hasCheckList.custom);!(u=(b=p.next()).done);u=!0)m=b.value,this.checkList1.push(m.warnNode);t.next=42;break;case 38:t.prev=38,t.t1=t.catch(34),v=!0,f=t.t1;case 42:t.prev=42,t.prev=43,!u&&p.return&&p.return();case 45:if(t.prev=45,!v){t.next=48;break}throw f;case 48:return t.finish(45);case 49:return t.finish(42);case 50:t.next=53;break;case 52:this.hasCheckList.custom=[];case 53:return k={},t.next=56,Object(d.U)(k);case 56:1===(x=t.sent).status&&(this.allWarnList=x.msg,this.getSecondList()),this.changeLabelToId(0,this.checkList),this.changeLabelToId(1,this.checkList1);case 60:case"end":return t.stop()}},t,this,[[14,18,22,30],[23,,25,29],[34,38,42,50],[43,,45,49]])}));return function(){return t.apply(this,arguments)}}(),methods:{getSecondList:function(){var t=this;return h()(n.a.mark(function e(){var a,s,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<t.allWarnList.custom.length)){e.next=12;break}return t.newWarnList[a]={},t.newWarnList[a].label=t.allWarnList.custom[a].warnNode,t.newWarnList[a].value=t.allWarnList.custom[a].id,e.next=7,Object(d.U)({parentId:t.allWarnList.custom[a].id});case 7:if(1===(s=e.sent).status)for(t.newWarnList[a].children=[],i=0;i<s.msg.length;i++)t.newWarnList[a].children[i]={},t.newWarnList[a].children[i].value=s.msg[i].id,t.newWarnList[a].children[i].label=s.msg[i].warnNode;case 9:a++,e.next=1;break;case 12:case"end":return e.stop()}},e,t)}))()},setNewNode:function(t){var e="",a=!0,s=!1,i=void 0;try{for(var r,n=c()(this.newWarnList);!(a=(r=n.next()).done);a=!0){var l=r.value;console.log(l);var o=t[t.length-2];if(l.value===o){var h=l.children,d=!0,u=!1,v=void 0;try{for(var f,p=c()(h);!(d=(f=p.next()).done);d=!0){var b=f.value,m=t[t.length-1];b.value===m&&(e=b.label)}}catch(t){u=!0,v=t}finally{try{!d&&p.return&&p.return()}finally{if(u)throw v}}}}}catch(t){s=!0,i=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}this.hasCheckList.custom.push({warnNode:e,id:t[t.length-1]}),this.checkList1.push(e),this.cascaderValue=[],this.dialogFormVisible=!1},showCheckList:function(t){this.changeLabelToId(0,t)},showCheckList1:function(t){this.changeLabelToId(1,t)},changeLabelToId:function(t,e){var a=[],s=[];s[t]=[],a=0===t?this.allWarnList.default:this.hasCheckList.custom;for(var r=0;r<e.length;r++){var n=!0,l=!1,o=void 0;try{for(var h,d=c()(a);!(n=(h=d.next()).done);n=!0){var u=h.value;e[r]===u.warnNode&&(s[t][r]={id:u.id})}}catch(t){l=!0,o=t}finally{try{!n&&d.return&&d.return()}finally{if(l)throw o}}}0===t?this.list0=[].concat(i()(s[0])):this.list1=[].concat(i()(s[1])),this.createdInfo.warnNodeList=[].concat(i()(this.list0),i()(this.list1))},newWarn:function(){var t=this;return h()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.changeLabelToId(0,t.checkList),t.changeLabelToId(1,t.checkList1),a=t.createdInfo,!0===t.defaults?a.isDefaults=1:a.isDefaults=0,a.warnName=t.title,e.next=7,Object(d.l)(a);case 7:1===e.sent.status&&t.$message({showClose:!0,type:"success",message:"创建或修改成功！"}),t.$router.push("/settings");case 10:case"end":return e.stop()}},e,t)}))()}},data:function(){return{title:"",defaults:!1,radio:"1",allWarnList:{default:[],custom:[]},newWarnList:[],cascaderValue:[],hasCheckList:{default:[],custom:[]},checkList:[],checkList1:[],createdInfo:{warnNodeList:[]},list0:[],list1:[],dialogFormVisible:!1,form:{},formLabelWidth:"120px"}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"points"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.$goback}},[t._v("返回")]),t._v(" "),a("div",{staticClass:"mt20",staticStyle:{width:"50%",margin:"0 auto","min-width":"960px"}},[a("div",{staticClass:"ovw-h",staticStyle:{"font-size":"16px","font-weight":"bold","margin-left":"-30px"}},[a("span",[t._v("提醒名称：")]),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{type:"text",maxlength:"20",clearable:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),a("el-checkbox",{attrs:{label:"是否将当前提醒设置为默认提醒"},model:{value:t.defaults,callback:function(e){t.defaults=e},expression:"defaults"}})],1),t._v(" "),a("div",{staticClass:"system"},[a("el-tag",{staticStyle:{margin:"20px 0 0 -10px"}},[t._v("系统提醒种类设置")]),t._v(" "),a("el-row",{staticStyle:{"line-height":"32px","margin-top":"20px"}},[a("el-col",{attrs:{span:14}},[t._v("节点种类：")]),t._v(" "),a("el-col",{attrs:{span:10}},[t._v("说明：")]),t._v(" "),a("el-checkbox-group",{on:{change:t.showCheckList},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.allWarnList.default,function(e){return a("el-row",{key:e.id,staticClass:"dashed"},[a("el-col",{attrs:{span:14}},[a("el-checkbox",{attrs:{label:e.warnNode}})],1),t._v(" "),a("el-col",{attrs:{span:10}},[t._v(t._s(e.detail))])],1)}),1)],1)],1),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"self"},[a("el-tag",{staticStyle:{margin:"20px 20px 0 -10px"}},[t._v("自定义提醒设置")]),t._v(" "),a("el-button",{staticClass:"mb20",attrs:{type:"plain",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增提醒")]),t._v(" "),a("el-checkbox-group",{on:{change:t.showCheckList1},model:{value:t.checkList1,callback:function(e){t.checkList1=e},expression:"checkList1"}},t._l(t.hasCheckList.custom,function(e){return a("el-row",{key:e.id,staticClass:"dashed",staticStyle:{"line-height":"32px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:14}},[a("el-checkbox",{attrs:{label:e.warnNode}})],1),t._v(" "),a("el-col",{attrs:{span:10}},[t._v(t._s(e.detail))])],1)}),1),t._v(" "),a("el-dialog",{attrs:{title:"新增提醒",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"提醒对应节点","label-width":t.formLabelWidth}},[a("el-cascader",{attrs:{options:t.newWarnList,"show-all-levels":!1,"expand-trigger":"hover"},model:{value:t.cascaderValue,callback:function(e){t.cascaderValue=e},expression:"cascaderValue"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.setNewNode(t.cascaderValue)}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"methods"},[a("el-tag",{staticStyle:{margin:"20px 20px 10px -10px"}},[t._v("提醒方式设置")]),t._v(" "),a("el-row",{staticStyle:{"line-height":"32px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("企业微信")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"2",disabled:""},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("邮箱")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"3",disabled:""},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("QQ")])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-radio",{attrs:{label:"4",disabled:""},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("微信")])],1)],1)],1),t._v(" "),a("el-row",{staticClass:"mt20",attrs:{gutter:10,type:"flex",justify:"center"}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",round:""},on:{click:t.newWarn}},[t._v("确定")])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",round:""}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var f=a("C7Lr")(u,v,!1,function(t){a("0OxJ")},"data-v-699d2af0",null);e.default=f.exports}});