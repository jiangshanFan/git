webpackJsonp([2],{"4p7o":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s,i=a("IHPB"),n=a.n(i),l=a("lC5x"),r=a.n(l),c=a("J0Oq"),p=a.n(c),u=a("glag"),m=a("c2Ch"),d=a("bBgq"),f=a.n(d),b=(a("jcz/"),{name:"sampleCount",created:function(){var e=p()(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={page:1,size:this.size,mark:1},this.$store.getters.itemCheck_item.mouldNo&&(t.mouldNo=this.$store.getters.itemCheck_item.mouldNo,this.mouldNoDisabled=!0),e.next=4,Object(m.M)(t);case 4:1===(a=e.sent).status&&(this.table=a.msg);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){},methods:{handleCurrentChange:function(e){var t=this;return p()(r.a.mark(function a(){var o,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.currentPage=e,(o={page:e,size:t.size,mark:1}).mouldNo=t.$store.getters.itemCheck_item.mouldNo,""!==t.value&&(o.projectName=t.value),""!==t.value1&&(o.mouldNo=t.value1),a.next=7,Object(m.M)(o);case 7:1===(s=a.sent).status&&(t.table=s.msg);case 9:case"end":return a.stop()}},a,t)}))()},search:function(){var e=this;return p()(r.a.mark(function t(){var a,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={page:1,size:e.size,mark:1},""!==e.value&&(a.projectName=e.value),""!==e.value1&&(a.mouldNo=e.value1),t.next=5,Object(m.M)(a);case 5:1===(o=t.sent).status&&(e.table=o.msg),console.log(e.mouldNoDisabled);case 8:case"end":return t.stop()}},t,e)}))()},handleClick:function(e){this.form=e,this.transportNo=e.transportNo,this.dialogFormVisible=!0,this.flag=1},openAdd:function(){this.flag=0,this.form={positionInfo:[]},this.$store.getters.itemCheck_item.mouldNo&&(this.form.mouldNo=this.$store.getters.itemCheck_item.mouldNo,this.mouldNoDisabled=!0),this.dialogFormVisible=!0,this.transportNo=""},openInner:function(e){e.transportNo?this.transportNo=e.transportNo:this.transportNo="",this.innerVisible=!0},add:f()((s=p()(r.a.mark(function e(t){var a,o,s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dialogFormVisible){e.next=25;break}if(""===t.transportNo){e.next=24;break}if(!(t.mouldNo&&t.goodsType&&t.transportType&&t.transportCompany)){e.next=21;break}if(!(1===t.goodsType&&t.sendSampleCount||2===t.goodsType&&!t.sendSampleCount)){e.next=18;break}return this.dialogFormVisible=!1,e.next=7,Object(m.f)(t);case 7:if(a=e.sent,this.flag_add=1,1!==a.status){e.next=16;break}return o={page:this.currentPage,size:this.size,mark:1},(s=this.$store.getters.itemCheck_item.mouldNo)&&(o.mouldNo=s),e.next=14,Object(m.M)(o);case 14:1===(i=e.sent).status&&(this.table=i.msg);case 16:e.next=19;break;case 18:this.$message({showClose:!0,type:"warning",message:"请注意填写信息,走模状态不要填写‘第几次送样/走模这一项信息！"});case 19:e.next=22;break;case 21:this.$message({showClose:!0,type:"warning",message:"请填写完整信息！"});case 22:e.next=25;break;case 24:this.$message({showClose:!0,type:"warning",message:"请填写运输单号！"});case 25:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)}),2e3,{maxWait:100,leading:!0,trailing:!1}),innerSubmit:f()((o=p()(r.a.mark(function e(t){var a,o,s,i,l,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.transportNo,!this.innerVisible){e.next=27;break}if(""===a||null===a||void 0===a){e.next=26;break}if(o=void 0,t.positionTime&&(o=this.$format(t.positionTime.getTime())),!o||!t.position){e.next=23;break}if(this.innerVisible=!1,this.form.positionInfo=[{time:o,position:t.position}].concat(n()(this.form.positionInfo)),1!==this.flag){e.next=21;break}return s={position:t.position,time:o,transportNo:a},e.next=12,Object(m.c)(s);case 12:if(1!==e.sent.status){e.next=21;break}return this.$message({showClose:!0,type:"success",message:"添加位置及相关信息成功！"}),i={page:this.currentPage,size:this.size,mark:1},(l=this.$store.getters.itemCheck_item.mouldNo)&&(i.mouldNo=l),e.next=19,Object(m.M)(i);case 19:1===(c=e.sent).status&&(this.table=c.msg);case 21:e.next=24;break;case 23:Object(u.Message)({showClose:!0,type:"warning",message:"请完整填写信息！"});case 24:e.next=27;break;case 26:Object(u.Message)({showClose:!0,type:"warning",message:"请输入运单号！"});case 27:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)}),3e3,{maxWait:100,leading:!0,trailing:!1}),cancelAdd:function(){this.inner={positionTime:"",position:""}},cancelAdds:function(){this.form={},this.flag_add=0}},data:function(){return{value:"",value1:"",table:{},flag_add:0,flag:0,dialogFormVisible:!1,innerVisible:!1,form:{positionInfo:[]},mouldNoDisabled:!1,inner:{positionTime:"",position:""},transportNo:"",ifShowAdd:!0,options:[{value:1,label:"送样"},{value:2,label:"走模"}],options1:[{value:1,label:"陆运"},{value:2,label:"空运"}],currentPage:1,size:10}}}),h={render:function(){var e=this,t=this,a=t.$createElement,o=t._self._c||a;return o("div",{attrs:{id:"sampleCount"}},[o("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:t.$goback}},[t._v("返回")]),t._v(" "),o("hr"),t._v(" "),o("div",{staticClass:"mt20"},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.openAdd}},[t._v("添加")]),t._v(" "),o("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.table.content,stripe:"",border:"","header-cell-class-name":"header_cell table_header_shadow"}},[o("el-table-column",{attrs:{fixed:"",type:"index",width:"60",label:"序号",align:"center",index:function(a){return e.$indexS(a,t.currentPage,t.size)}}}),t._v(" "),o("el-table-column",{attrs:{prop:"projectName",label:"项目名称",width:"85",align:"center","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"mouldNo",label:"模具编号",width:"100",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"sendSampleCount",label:"送样次数",width:"85",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"transportType",label:"运输方式",width:"85",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(1===e.row.transportType?"陆运":"空运"))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"goodsType",label:"货物类型",width:"85",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(1===e.row.goodsType?"送样":"走模"))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"transportCompany",label:"运输公司",width:"85",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"transportNo",label:"运输单号",width:"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"positionInfo",label:"备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.positionInfo,function(e,a){return o("p",{key:a,staticClass:"positionInfo ovw-h"},[o("span",{staticStyle:{padding:"0",margin:"0"},attrs:{title:e.time+": "+e.position}},[t._v(t._s(e.time)+" : "+t._s(e.position))])])})}}])}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticClass:"underline",attrs:{type:"text",align:"center"},on:{click:function(a){return t.handleClick(e.row)}}},[t._v("详情")])]}}])})],1),t._v(" "),o("div",{staticClass:"pagination fr ovw-h mt20"},[t.table.totalCount?o("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.size,layout:"total, prev, pager, next",total:t.table.totalCount},on:{"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),o("el-dialog",{attrs:{title:t.flag?"运输信息详情":"新增运输信息",visible:t.dialogFormVisible,center:"","custom-class":"dialogStyle"},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.cancelAdds}},[o("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"130px"}},[o("el-row",{staticStyle:{"line-height":"40px"},attrs:{gutter:10}},[o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"模具编号：","label-width":"82"}},[o("el-input",{staticStyle:{width:"162px"},attrs:{autocomplete:"off",size:"small",disabled:1===t.flag||t.mouldNoDisabled},model:{value:t.form.mouldNo,callback:function(e){t.$set(t.form,"mouldNo",e)},expression:"form.mouldNo"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:11,offset:2}},[o("el-form-item",{attrs:{label:"第几次送样/走模："}},[o("el-input",{staticStyle:{width:"162px"},attrs:{autocomplete:"off",size:"small",disabled:1===t.flag},model:{value:t.form.sendSampleCount,callback:function(e){t.$set(t.form,"sendSampleCount",e)},expression:"form.sendSampleCount"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"运输单号：","label-width":"82"}},[o("el-input",{staticStyle:{width:"162px"},attrs:{autocomplete:"off",size:"small",disabled:1===t.flag},model:{value:t.form.transportNo,callback:function(e){t.$set(t.form,"transportNo",e)},expression:"form.transportNo"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:11,offset:2}},[o("el-form-item",{attrs:{label:"运输公司："}},[o("el-input",{staticStyle:{width:"162px"},attrs:{autocomplete:"off",size:"small",disabled:1===t.flag},model:{value:t.form.transportCompany,callback:function(e){t.$set(t.form,"transportCompany",e)},expression:"form.transportCompany"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:11}},[o("el-form-item",{attrs:{label:"货物类别：","label-width":"82"}},[o("el-select",{staticStyle:{width:"162px"},attrs:{placeholder:"请选择",size:"small",disabled:1===t.flag},model:{value:t.form.goodsType,callback:function(e){t.$set(t.form,"goodsType",e)},expression:"form.goodsType"}},t._l(t.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),t._v(" "),o("el-col",{attrs:{span:11,offset:2}},[o("el-form-item",{attrs:{label:"运输方式："}},[o("el-select",{staticStyle:{width:"162px"},attrs:{placeholder:"请选择",size:"small",disabled:1===t.flag},model:{value:t.form.transportType,callback:function(e){t.$set(t.form,"transportType",e)},expression:"form.transportType"}},t._l(t.options1,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),t._v(" "),o("p",{staticClass:"c3 fwb f16"},[t._v("详情：")]),t._v(" "),o("el-table",{staticClass:"mb20",staticStyle:{width:"100%"},attrs:{data:t.form.positionInfo,"max-height":"300",size:"small",border:"","header-cell-class-name":"header_cell"}},[o("el-table-column",{attrs:{type:"index",width:"100",label:"序号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"time",label:"时间",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"position",label:"位置及相关信息"}})],1),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.openInner(t.form)}}},[t._v("添加位置及相关信息")])],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.flag,expression:"!flag"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add(t.form)}}},[t._v("确 定")]),t._v(" "),o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),o("el-dialog",{attrs:{width:"30%",title:"添加位置及相关信息",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e},closed:t.cancelAdd}},[o("el-form",{attrs:{model:t.inner,"label-position":"left"}},[o("el-form-item",{attrs:{label:"时间："}},[o("div",{staticClass:"block"},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.inner.positionTime,callback:function(e){t.$set(t.inner,"positionTime",e)},expression:"inner.positionTime"}})],1)]),t._v(" "),o("el-form-item",{attrs:{label:"位置及相关信息："}},[o("el-input",{staticStyle:{width:"100%"},attrs:{resize:"none",autocomplete:"off",type:"textarea",autosize:{minRows:2}},model:{value:t.inner.position,callback:function(e){t.$set(t.inner,"position",e)},expression:"inner.position"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.innerSubmit(t.inner)}}},[t._v("确 定")]),t._v(" "),o("el-button",{on:{click:function(e){t.innerVisible=!1}}},[t._v("取 消")])],1)],1)],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(b,h,!1,function(e){a("pVug"),a("ZTha")},"data-v-66c9c4df",null);t.default=g.exports},ZTha:function(e,t){},pVug:function(e,t){}});