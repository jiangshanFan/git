webpackJsonp([26],{"7LLz":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("lC5x"),a=n.n(o),i=n("aA9S"),l=n.n(i),r=n("J0Oq"),s=n.n(r),d=(n("glag"),n("c2Ch")),u={name:"point",created:function(){var e=s()(a.a.mark(function e(){var t,n,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mouldNo=this.$store.getters.itemCheck_item.mouldNo,e.next=3,Object(d.C)({mouldNo:t,type:0,mark:1});case 3:return n=e.sent,e.next=6,Object(d.C)({mouldNo:t,type:1,mark:1});case 6:o=e.sent,1===n.msg.length?(this.tableData=this.tableOrg,this.tableData[0].nodeInfo=n.msg[0].nodeInfo,this.tableData[1].nodeInfo=l()({},this.tableOrg[1].nodeInfo)):2===n.msg.length&&(this.tableData=n.msg),1===o.msg.length?(this.newTableData=this.tableOrg,this.newTableData[0].nodeInfo=o.msg[0].nodeInfo,this.newTableData[1].nodeInfo=l()({},this.tableOrg[1].nodeInfo),this.newPointShow=!0):2===o.msg.length?(this.newTableData=o.msg,this.newPointShow=!0):0===o.msg.length&&(this.newPointShow=!1,this.newTableData=this.tableOrg);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{spanMethod:function(e){e.row;var t=e.column,n=e.rowIndex;e.columnIndex;if("holidays1 假期1"===t.label||"holidays2 假期2"===t.label||"holidays3 假期3"===t.label)return n%2==0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},changeNode:function(e){var t=this;return s()(a.a.mark(function n(){var o,i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={mouldNo:t.mouldNo,nodeName:e.nodeName,nodeType:e.nodeType,timeType:e.timeType,fieldType:e.fieldType},0===e.fieldType?o.time=e.time:o.remark=e.remark,n.next=4,Object(d.e)(o);case 4:if(1!==n.sent.status){n.next=10;break}return n.next=8,Object(d.C)({mouldNo:t.mouldNo,type:e.nodeType,mark:1});case 8:i=n.sent,0===e.nodeType?2===i.msg.length?t.tableData=i.msg:0===e.timeType?t.tableData[0].nodeInfo=i.msg[0].nodeInfo:t.tableData[1].nodeInfo=i.msg[0].nodeInfo:2===i.msg.length?t.newTableData=i.msg:0===e.timeType?t.newTableData[0].nodeInfo=i.msg[0].nodeInfo:t.newTableData[1].nodeInfo=i.msg[0].nodeInfo;case 10:t.dialogPointChange=!1;case 11:case"end":return n.stop()}},n,t)}))()},addNewPoint:function(e){var t=this;return s()(a.a.mark(function n(){var o,i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e.nodeName||null===e.nodeName||""===e.nodeName||void 0===e.time||null===e.time||""===e.time){n.next=16;break}return o={mouldNo:t.mouldNo,nodeName:e.nodeName,nodeType:1,timeType:0,time:e.time,fieldType:0},n.next=4,Object(d.e)(o);case 4:if(1!==n.sent.status){n.next=13;break}return n.next=8,Object(d.C)({mouldNo:o.mouldNo,type:1,mark:1});case 8:return n.next=10,n.sent;case 10:i=n.sent,t.newTableData[0].nodeInfo=i.msg[0].nodeInfo,t.newPointShow=!0;case 13:t.dialogPoint=!1,n.next=17;break;case 16:t.$message({showClose:!0,type:"warning",message:"请将信息填写完整！"});case 17:case"end":return n.stop()}},n,t)}))()},getInfo:function(e,t,n,o){null!==this.mouldNo&&void 0!==this.mouldNo&&""!==this.mouldNo&&("holidays1 假期1"===t.label||"holidays2 假期2"===t.label||"holidays3 假期3"===t.label?this.dialogPointChange=!1:(this.dialogPointChange=!0,this.formPointChange.label=t.label,this.formPointChange.nodeName=t.property,this.formPointChange.timeType=e.timeType,this.formPointChange.row=e,this.formPointChange.nodeType=0,console.log(t.label),"Leadtime of Steel 钢料交期"===t.label||"Graining LT 皮纹交期"===t.label||"Mold Shipment Preparation 走模准备时间"===t.label?(this.formPointChange.fieldType=1,this.ifTime=!1):(this.formPointChange.fieldType=0,this.ifTime=!0)))},getNewInfo:function(e,t,n,o){null!==this.mouldNo&&void 0!==this.mouldNo&&""!==this.mouldNo?(this.dialogPointChange=!0,this.formPointChange.label=t.label,this.formPointChange.nodeName=t.property,this.formPointChange.timeType=e.timeType,this.formPointChange.row=e,this.formPointChange.nodeType=1,this.formPointChange.fieldType=0,this.ifTime=!0):this.$message({showClose:!0,type:"warning",message:"请先输入模号！"})},ifHasMouldNo:function(e){null!==this.mouldNo&&""!==this.mouldNo&&void 0!==this.mouldNo?this[e]=!0:this.$message({showClose:!0,type:"warning",message:"请先输入模号"})},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}},data:function(){return{ifTime:!0,mouldNo:"MBS180001",tableData:[],newTableData:[],newPointShow:!1,tableOrg:[{timeType:0,nodeInfo:{IMM:[],Factory_Information:[],Shrinkage:[],Final_MF:[],CAD_data_90:[],DFM_Report_Providing:[],Steel_Order_Report_Providing:[],Steel_Order_Confirmation:[],Leadtime_of_Steel:[],CAD_data_100:[],Final_Mold_Design_Providing:[],Steel_Ready:[],Final_Mold_Design_Review:[],Rough_Milling_Approval:[],Fine_Milling_Approval:[],HRS_Ready:[],T0:[],T1:[],T2:[],T3:[],Graining_Validation:[],Graining_LT:[],T4:[],T5:[],Final_Validation:[],Mold_Shipment_Preparation:[],Mold_Departure_From_Basis:[]}},{timeType:1,nodeInfo:{IMM:[],Factory_Information:[],Shrinkage:[],Final_MF:[],CAD_data_90:[],DFM_Report_Providing:[],Steel_Order_Report_Providing:[],Steel_Order_Confirmation:[],Leadtime_of_Steel:[],CAD_data_100:[],Final_Mold_Design_Providing:[],Steel_Ready:[],Final_Mold_Design_Review:[],Rough_Milling_Approval:[],Fine_Milling_Approval:[],HRS_Ready:[],T0:[],T1:[],T2:[],T3:[],Graining_Validation:[],Graining_LT:[],T4:[],T5:[],Final_Validation:[],Mold_Shipment_Preparation:[],Mold_Departure_From_Basis:[]}}],basicInfo:{},project:{projectZhuguan:{userId:""},projectManager:{userId:""},projectEngineer:{userId:""}},formPoint:{},formPointChange:{},dialogPoint:!1,dialogVisible:!1,dialogPointChange:!1,dialogDescriptionVisible:!1,limit:1,dialogImageUrl:"",value:""}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"pointManage"}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.$goback}},[e._v("返回")]),e._v(" "),n("div",{staticClass:"point"},[n("el-row",{staticClass:"mt20"},[n("el-tag",{staticClass:"mr20",attrs:{type:"info"}},[e._v("项目节点")]),e._v(" "),n("el-button",{staticClass:"mb20",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.ifHasMouldNo("dialogPoint")}}},[e._v("新增节点")])],1),e._v(" "),n("el-dialog",{attrs:{title:"新增节点",visible:e.dialogPoint,center:""},on:{"update:visible":function(t){e.dialogPoint=t}}},[n("el-form",{ref:"formPoint",attrs:{model:e.formPoint,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"节点名称"}},[n("el-input",{model:{value:e.formPoint.nodeName,callback:function(t){e.$set(e.formPoint,"nodeName",t)},expression:"formPoint.nodeName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"计划时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.formPoint.time,callback:function(t){e.$set(e.formPoint,"time",t)},expression:"formPoint.time"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogPoint=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewPoint(e.formPoint)}}},[e._v("提 交")])],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","span-method":e.spanMethod},on:{"cell-click":e.getInfo}},[n("el-table-column",{attrs:{prop:"timeType",label:"类型",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(0===t.row.timeType?"计划时间":"实际时间"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"IMM",label:"IMM 注塑机资料",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.IMM,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Factory_Information",label:"Factory Information工厂信息",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Factory_Information,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Shrinkage",label:"Shrinkage 缩水率",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Shrinkage,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Final_MF",label:"Final MF 最终版模流",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Final_MF,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"CAD_data_90",label:"90%CAD data 90%产品数据",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.CAD_data_90,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"DFM_Report_Providing",label:"DFM Report Providing DFM报告提供",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.DFM_Report_Providing,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Steel_Order_Report_Providing",label:"Steel Order Report Providing 订料报告提供",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Steel_Order_Report_Providing,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Steel_Order_Confirmation",label:"Steel Order Confirmation 订料确认",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Steel_Order_Confirmation,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Leadtime_of_Steel",label:"Leadtime of Steel 钢料交期",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Leadtime_of_Steel,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"CAD_data_100",label:"100%CAD data 100%产品数据",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.CAD_data_100,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Final_Mold_Design_Providing",label:"Final Mold Design Providing 最终模图提供",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Final_Mold_Design_Providing,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Steel_Ready",label:"SteelReady 钢料回厂",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Steel_Ready,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Final_Mold_Design_Review",label:"Final Mold Design Review 最终模图评审",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Final_Mold_Design_Review,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Rough_Milling_Approval",label:"Rough Milling Approval 粗加工确认",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Rough_Milling_Approval,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Fine_Milling_Approval",label:"Fine Milling Approval 精加工确认",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Fine_Milling_Approval,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"HRS_Ready",label:"HRS Ready 热流道回厂",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.HRS_Ready,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"holidays1",label:"holidays1 假期1",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(t.row.nodeInfo.holidays1?t.row.nodeInfo.holidays1[0]:""))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"T0",label:"T0",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.T0,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"T1",label:"T1",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.T1,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"T2",label:"T2",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.T2,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"T3",label:"T3",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.T3,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Graining_Validation",label:"Graining Validation 光板件确认",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Graining_Validation,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Graining_LT",label:"Graining LT 皮纹交期",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Graining_LT,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"holidays2",label:"holidays2 假期2",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(t.row.nodeInfo.holidays2?t.row.nodeInfo.holidays2[0]:""))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"T4",label:"T4",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.T4,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"T5",label:"T5",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.T5,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Final_Validation",label:"Final Validation 走模前验收",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Final_Validation,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Mold_Shipment_Preparation",label:"Mold Shipment Preparation 走模准备时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Mold_Shipment_Preparation,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"Mold_Departure_From_Basis",label:"Mold Departure From Basis 模具离厂日期",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.nodeInfo.Mold_Departure_From_Basis,function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"holidays3 假期3",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(t.row.nodeInfo.holidays3?t.row.nodeInfo.holidays3[0]:""))])]}}])})],1),e._v(" "),e.newPointShow?n("div",{staticClass:"mt20"},[n("el-tag",{attrs:{type:"info"}},[e._v("新增节点类型：")]),e._v(" "),n("el-table",{staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:e.newTableData,border:""},on:{"cell-click":e.getNewInfo}},[n("el-table-column",{attrs:{prop:"timeType",label:"类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(0===t.row.timeType?"计划时间":"实际时间"))])]}}],null,!1,712334731)}),e._v(" "),e._l(Object.keys(e.newTableData[0].nodeInfo),function(t){return n("el-table-column",{key:t,attrs:{width:"180",prop:t,label:t},scopedSlots:e._u([{key:"header",fn:function(t){return[n("span",[e._v(e._s(t.column.property))])]}},{key:"default",fn:function(o){return e._l(o.row.nodeInfo[t],function(t){return n("p",{staticClass:"timePoint"},[e._v(e._s(t))])})}}],null,!0)})})],2)],1):e._e(),e._v(" "),n("el-dialog",{attrs:{title:"修改节点",visible:e.dialogPointChange,center:""},on:{"update:visible":function(t){e.dialogPointChange=t}}},[n("el-form",{ref:"formPointChange",attrs:{model:e.formPointChange,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"节点名称："}},[n("span",[e._v(e._s(e.formPointChange.label))])]),e._v(" "),e.ifTime?n("el-form-item",{attrs:{label:0===e.formPointChange.timeType?"计划时间：":"实际时间："}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.formPointChange.time,callback:function(t){e.$set(e.formPointChange,"time",t)},expression:"formPointChange.time"}})],1):e._e(),e._v(" "),e.ifTime?e._e():n("el-form-item",{attrs:{label:"时间周期："}},[n("el-input",{staticStyle:{width:"60px","margin-right":"20px"},model:{value:e.formPointChange.remark,callback:function(t){e.$set(e.formPointChange,"remark",t)},expression:"formPointChange.remark"}}),e._v("周\n        ")],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeNode(e.formPointChange)}}},[e._v("提 交")]),e._v(" "),n("el-button",{on:{click:function(t){e.dialogPointChange=!1}}},[e._v("取 消")])],1)],1)],1)],1)},staticRenderFns:[]};var c=n("C7Lr")(u,_,!1,function(e){n("AphB")},"data-v-621a403e",null);t.default=c.exports},AphB:function(e,t){}});