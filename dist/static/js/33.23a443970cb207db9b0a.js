webpackJsonp([33],{"6xR7":function(e,t){},Bt8x:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),r=a.n(s),o=a("lC5x"),n=a.n(o),l=a("J0Oq"),i=a.n(l),c=a("glag"),p=a("c2Ch"),d={name:"productPlanTableEdit",created:function(){this.getTableInfo(1)},methods:{getTableInfo:function(e){var t=this;return i()(n.a.mark(function a(){var s,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.isActive=e,a.next=3,Object(p._12)({mouldCode:t.$store.getters.itemCheck_item.mouldNo,bigTypeCode:e,mark:e});case 3:if(1===(s=a.sent).status)for(t.table=s.msg,r=0;r<t.table.length;r++)0===r?t.table[r].flag=1:r===t.table.length-1&&(t.table[r].flag=-1);case 5:case"end":return a.stop()}},a,t)}))()},up:function(e){var t=this;return i()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.j)({id:e.id,sortOrder:e.sortOrder,flag:1});case 2:1===a.sent.status&&(t.getTableInfo(e.bigTypeCode),Object(c.Message)({showClose:!0,type:"success",message:"上移成功！"}));case 4:case"end":return a.stop()}},a,t)}))()},down:function(e){var t=this;return i()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.j)({id:e.id,sortOrder:e.sortOrder,flag:-1});case 2:1===a.sent.status&&(t.getTableInfo(e.bigTypeCode),Object(c.Message)({showClose:!0,type:"success",message:"下移成功！"}));case 4:case"end":return a.stop()}},a,t)}))()},showDialog:function(){this.dialogFormVisible=!0,this.form={bigTypeCode:3},this.type=0},addOrChangeProcess:function(e){var t=this;return i()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.valid){a.next=24;break}if(!t.valid1){a.next=21;break}if(!(e.processName&&e.appointStartDate&&e.appointEndDate)){a.next=18;break}if(e.mouldCode=t.$store.getters.itemCheck_item.mouldNo,0!==t.type){a.next=11;break}return a.next=7,Object(p.X)(e);case 7:1===a.sent.status&&(t.dialogFormVisible=!1,Object(c.Message)({showClose:!0,type:"success",message:"添加新工序成功！"})),a.next=15;break;case 11:return a.next=13,Object(p._19)(e);case 13:1===a.sent.status&&(t.dialogFormVisible=!1,Object(c.Message)({showClose:!0,type:"success",message:"修改工序成功！"}));case 15:t.getTableInfo(e.bigTypeCode),a.next=19;break;case 18:Object(c.Message)({showClose:!0,type:"warning",message:"请填写完整信息，其中工序名称为必填项，若有计划开始时间必须有计划结束时间！"});case 19:a.next=22;break;case 21:Object(c.Message)({showClose:!0,type:"error",message:"请正确填写时间，若有实际结束时间必须有实际开始时间，且实际开始时间必须小于实际结束时间！"});case 22:a.next=25;break;case 24:Object(c.Message)({showClose:!0,type:"error",message:"请正确填写时间，计划开始时间必须小于计划结束时间！"});case 25:case"end":return a.stop()}},a,t)}))()},show_edit:function(e){var t=this;return i()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.form=JSON.parse(r()(e)),t.dialogFormVisible=!0,t.type=1;case 3:case"end":return a.stop()}},a,t)}))()},process_delete:function(e){var t=this;this.processDelete=e,c.MessageBox.confirm('\n          <div class="ovw-h">\n          \x3c!--确认是否删除的弹框--\x3e\n            <div class="flex_row_container" style="width: 600px;align-items:center;text-align:left;">\n              <p class="messageBox_icon_confirm" style="width:200px;height:200px;"></p>\n              <div class="ovw-h" style="padding:30px;box-sizing:border-box;width:400px;">\n                是否删除工序\n                <p class="c3 fwb f16">“'+e.processName+"?”</p>\n              </div>\n            </div>\n          </div>","",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(i()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.m)({id:e.id});case 2:1===a.sent.status&&(t.getTableInfo(e.bigTypeCode),Object(c.Message)({type:"success",message:"删除成功!"}));case 4:case"end":return a.stop()}},a,this)}))).catch(function(){Object(c.Message)({type:"info",message:"已取消删除"})})},checkTime:function(){var e=this.form;e.appointStartDate&&e.appointEndDate&&(this.valid=e.appointStartDate<=e.appointEndDate),e.actualEndDate&&(e.actualStartDate?this.valid1=e.actualStartDate<=e.actualEndDate:this.valid1=!1)}},data:function(){return{isActive:1,tooltip:!0,dialogFormVisible:!1,form:{},valid:!0,valid1:!0,processDelete:{},type:0,table:[],cellStyle:{height:"40px !important",padding:0}}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"productPlanTableEdit"}},[a("el-button",{staticClass:"el-button_plain_mini",attrs:{type:"primary",plain:""},on:{click:e.$goback}},[e._v("返回")]),e._v(" "),a("div",{staticClass:"mt20"},[a("el-button",{class:{active:1===e.isActive},attrs:{type:"primary",plain:""},on:{click:function(t){return e.getTableInfo(1)}}},[e._v("设计")]),e._v(" "),a("el-button",{class:{active:2===e.isActive},attrs:{type:"primary",plain:""},on:{click:function(t){return e.getTableInfo(2)}}},[e._v("加工")]),e._v(" "),a("el-button",{class:{active:3===e.isActive},attrs:{type:"primary",plain:""},on:{click:function(t){return e.getTableInfo(3)}}},[e._v("精修整")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"5px"},attrs:{data:e.table,border:"",stripe:"","header-cell-class-name":"header_cell table_header_shadow","tooltip-effect":"light","cell-style":e.cellStyle}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"processName",label:"工序名称","show-overflow-tooltip":e.tooltip,align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appointStartDate",label:"计划开始时间",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appointEndDate",label:"计划结束时间",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"actualStartDate",label:"实际开始时间",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"actualEndDate",label:"实际结束时间",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[3===t.row.bigTypeCode&&1!==t.row.flag?a("el-button",{staticClass:"el-icon-back rotate90 buttonBorder",attrs:{size:"medium",type:"text"},on:{click:function(a){return e.up(t.row)}}}):e._e(),e._v(" "),3===t.row.bigTypeCode&&-1!==t.row.flag?a("el-button",{staticClass:"el-icon-back rotate270 buttonBorder",attrs:{size:"medium",type:"text"},on:{click:function(a){return e.down(t.row)}}}):e._e(),e._v(" "),a("el-button",{staticClass:"el-icon-edit-outline buttonBorder",attrs:{size:"medium",type:"text"},on:{click:function(a){return e.show_edit(t.row)}}}),e._v(" "),t.row.partStatus?a("el-button",{staticClass:"el-icon-delete buttonBorder",attrs:{size:"medium",type:"text"},on:{click:function(a){return e.process_delete(t.row)}}}):e._e()]}}])})],1),e._v(" "),3===e.isActive?a("el-button",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"12px"},attrs:{size:"medium",type:"text"},on:{click:e.showDialog}},[e._v("添加工序")]):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"",visible:e.dialogFormVisible,center:"","custom-class":"dialogStyle"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,"label-position":"right"}},[a("el-row",{staticStyle:{"line-height":"40px"},attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"fwb f16 c3",attrs:{label:"工序名称：","label-width":"82"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",size:"small",disabled:0===e.form.partStatus,title:e.form.processName},model:{value:e.form.processName,callback:function(t){e.$set(e.form,"processName",t)},expression:"form.processName"}})],1)],1),e._v(" "),3===e.form.bigTypeCode?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"工序类别：","label-width":"82"}},[a("span",{staticClass:"fwb c3"},[e._v("精修整")])])],1):e._e(),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"计划时间：","label-width":"82"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择起始日期","value-format":"yyyy-MM-dd"},on:{change:e.checkTime},model:{value:e.form.appointStartDate,callback:function(t){e.$set(e.form,"appointStartDate",t)},expression:"form.appointStartDate"}}),e._v(" ——\n            "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择结束日期","value-format":"yyyy-MM-dd"},on:{change:e.checkTime},model:{value:e.form.appointEndDate,callback:function(t){e.$set(e.form,"appointEndDate",t)},expression:"form.appointEndDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"实际时间：","label-width":"82"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择起始日期","value-format":"yyyy-MM-dd"},on:{change:e.checkTime},model:{value:e.form.actualStartDate,callback:function(t){e.$set(e.form,"actualStartDate",t)},expression:"form.actualStartDate"}}),e._v(" ——\n            "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择结束日期","value-format":"yyyy-MM-dd"},on:{change:e.checkTime},model:{value:e.form.actualEndDate,callback:function(t){e.$set(e.form,"actualEndDate",t)},expression:"form.actualEndDate"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrChangeProcess(e.form)}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var f=a("C7Lr")(d,u,!1,function(e){a("6xR7")},"data-v-3dffc113",null);t.default=f.exports}});