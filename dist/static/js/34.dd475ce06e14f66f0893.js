webpackJsonp([34],{TlX0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("HzJ8"),l=a.n(i),s=a("lC5x"),n=a.n(s),o=a("J0Oq"),r=a.n(o),c=(a("glag"),a("c2Ch")),d={name:"add",data:function(){return{info:{},imgUrl:"",fileList:[],uploadData:{path:"feedback"},radio:"1",dialogVisible:!1}},mounted:function(){},methods:{addNew:function(e){var t=this;return r()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.imgeUrl=t.imgUrl?t.imgUrl.slice(0,t.imgUrl.length-1):t.imgUrl,e.normal="1"===t.radio,!e.title||!e.mouldNo){a.next=9;break}return a.next=5,Object(c.a)(e);case 5:1===a.sent.status&&(t.$message({showClose:!0,type:"success",message:"新增反馈成功！"}),t.$router.push("/list")),a.next=10;break;case 9:t.$message({showClose:!0,type:"warning",message:"请填写完整所有内容！"});case 10:case"end":return a.stop()}},a,t)}))()},handleAvatarSuccess:function(e,t){var a=e.msg[0].url;this.imgUrl+=a+"|"},handleRemove:function(e,t){this.fileToImg(t),console.log(e,t)},handlePictureCardPreview:function(e){this.info.imgeUrl=e.url,this.dialogVisible=!0},handleExceed:function(e,t){this.$message.warning("图片添加数量不能超过6张!")},back:function(){this.$router.go(-1)},fileToImg:function(e){var t=!0,a=!1,i=void 0;try{for(var s,n=l()(e);!(t=(s=n.next()).done);t=!0){var o=s.value;this.imgUrl+=o.url+"|"}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"border",staticStyle:{padding:"15px 30px"},attrs:{id:"add"}},[a("el-button",{staticClass:"mb20",attrs:{type:"primary",size:"mini"},on:{click:e.$goback}},[e._v("返回")]),e._v(" "),a("div",{staticClass:"ovw-h mt20"},[a("div",{staticClass:"info"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:18}},[e._v("标题："),a("el-input",{attrs:{size:"small"},model:{value:e.info.title,callback:function(t){e.$set(e.info,"title",t)},expression:"info.title"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("模具编号："),a("el-input",{attrs:{size:"small"},model:{value:e.info.mouldNo,callback:function(t){e.$set(e.info,"mouldNo",t)},expression:"info.mouldNo"}})],1)],1),e._v(" "),a("div",{staticClass:"ovw-h mt20"},[a("el-col",{attrs:{span:24}},[a("span",[e._v("模具使用是否正常：")]),e._v(" "),a("el-radio",{attrs:{label:"1",border:"",size:"mini"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"2",border:"",size:"mini"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("异常")])],1)],1)],1),e._v(" "),a("div",{staticClass:"add-content border mt20"},[a("p",[e._v(e._s("1"===e.radio?"希望我们进一步提高的地方：":"异常原因："))]),e._v(" "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:15},placeholder:"请输入内容"},model:{value:e.info.details,callback:function(t){e.$set(e.info,"details",t)},expression:"info.details"}}),e._v(" "),a("div",{staticClass:"add-upload mt20 mb20"},[a("el-upload",{attrs:{action:"/api/upload/uploadManyFile",accept:"image/*","list-type":"picture-card",multiple:"","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,data:e.uploadData,"file-list":e.fileList,limit:6,"on-exceed":e.handleExceed}},[a("i",{staticClass:"el-icon-plus"},[a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("添加图片")])])]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.info.imgeUrl,alt:""}})])],1)],1),e._v(" "),a("el-row",{staticClass:"mt20",staticStyle:{"text-align":"center"}},[a("el-col",{attrs:{span:6,offset:6}},[a("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:function(t){return e.addNew(e.info)}}},[e._v("提交")])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",plain:"",size:"medium"},on:{click:e.back}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var m=a("C7Lr")(d,u,!1,function(e){a("v6GF")},"data-v-3dd3ea8e",null);t.default=m.exports},v6GF:function(e,t){}});