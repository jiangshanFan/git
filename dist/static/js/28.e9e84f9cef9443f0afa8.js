webpackJsonp([28],{JMK2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("lC5x"),o=a.n(l),r=a("J0Oq"),s=a.n(r),n=(a("glag"),a("c2Ch")),i={name:"purchase",created:function(){var t=s()(o.a.mark(function t(){var e,a,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.item=this.$store.getters.itemCheck_item,e={mouldCode:this.item.mouldNo,page:1,size:this.size},t.next=4,Object(n._4)(e);case 4:return 1===(a=t.sent).status&&(this.table=a.msg,this.loading=!1),t.next=8,Object(n.s)({mouldCode:this.item.mouldNo});case 8:1===(l=t.sent).status&&(this.publish=l.msg);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),beforeMount:function(){},mounted:function(){var t=document.getElementById("search-purchase").cloneNode(!0);document.getElementById("tab-purchase").appendChild(t),t.addEventListener("click",this.ifSearchClick),this.ifSearchBtn=!1},beforeUpdate:function(){},methods:{ifSearchClick:function(){this.ifSearch=!this.ifSearch,this.search={}},searchList:function(t){var e=this;return s()(o.a.mark(function a(){var l,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.loading=!0,e.currentPage=1,l=void 0,r={mouldCode:e.item.mouldNo,page:1,size:e.size},e.table={},t.code&&(1==e.name?r.materialNo=t.code:r.partCode=t.code),t.name&&(1==e.name?r.materialBane=t.name:r.partName=t.name),a.t0=e.name,a.next="2"===a.t0?9:"3"===a.t0?13:"4"===a.t0?17:"5"===a.t0?21:"6"===a.t0?25:29;break;case 9:return a.next=11,Object(n.p)(r);case 11:return l=a.sent,a.abrupt("break",33);case 13:return a.next=15,Object(n.q)(r);case 15:return l=a.sent,a.abrupt("break",33);case 17:return a.next=19,Object(n.r)(r);case 19:return l=a.sent,a.abrupt("break",33);case 21:return a.next=23,Object(n.S)(r);case 23:return l=a.sent,a.abrupt("break",33);case 25:return a.next=27,Object(n._4)(r);case 27:return l=a.sent,a.abrupt("break",33);case 29:return a.next=31,Object(n._18)(r);case 31:l=a.sent,console.log("不合格");case 33:1===l.status&&(e.table=l.msg,e.loading=!1);case 34:case"end":return a.stop()}},a,e)}))()},handleClick:function(t,e){var a=this;return s()(o.a.mark(function e(){var l,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.loading=!0,a.currentPage=1,l=void 0,r={mouldCode:a.item.mouldNo,page:1,size:a.size},a.table={},e.t0=t.name,e.next="2"===e.t0?7:"3"===e.t0?11:"4"===e.t0?15:"5"===e.t0?19:"6"===e.t0?23:27;break;case 7:return e.next=9,Object(n.p)(r);case 9:return l=e.sent,e.abrupt("break",31);case 11:return e.next=13,Object(n.q)(r);case 13:return l=e.sent,e.abrupt("break",31);case 15:return e.next=17,Object(n.r)(r);case 17:return l=e.sent,e.abrupt("break",31);case 19:return e.next=21,Object(n.S)(r);case 21:return l=e.sent,e.abrupt("break",31);case 23:return e.next=25,Object(n._4)(r);case 25:return l=e.sent,e.abrupt("break",31);case 27:return e.next=29,Object(n._18)(r);case 29:l=e.sent,console.log("不合格");case 31:1===l.status&&(t.name!==a.name&&(a.ifSearch=!1,a.name=t.name),a.table=l.msg,a.loading=!1);case 32:case"end":return e.stop()}},e,a)}))()},handleCurrentChange:function(t){var e=this;return s()(o.a.mark(function a(){var l,r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.loading=!0,e.currentPage=t,l=void 0,r={mouldCode:e.item.mouldNo,page:t,size:e.size},e.ifSearch&&(e.search.code&&(1==e.name?r.materialNo=e.search.code:r.partCode=e.search.code),e.search.name&&(1==e.name?r.materialBane=e.search.name:r.partName=e.search.name)),a.t0=e.name,a.next="2"===a.t0?7:"3"===a.t0?11:"4"===a.t0?15:"5"===a.t0?19:"6"===a.t0?23:27;break;case 7:return a.next=9,Object(n.p)(r);case 9:return l=a.sent,a.abrupt("break",31);case 11:return a.next=13,Object(n.q)(r);case 13:return l=a.sent,a.abrupt("break",31);case 15:return a.next=17,Object(n.r)(r);case 17:return l=a.sent,a.abrupt("break",31);case 19:return a.next=21,Object(n.S)(r);case 21:return l=a.sent,a.abrupt("break",31);case 23:return a.next=25,Object(n._4)(r);case 25:return l=a.sent,a.abrupt("break",31);case 27:return a.next=29,Object(n._18)(r);case 29:l=a.sent,console.log("不合格");case 31:1===l.status&&(e.table=l.msg,e.loading=!1);case 32:case"end":return a.stop()}},a,e)}))()},checkReport:function(t){this.$store.dispatch("itemCheck_report",t),this.$router.push("/report")}},data:function(){return{search:{code:"",name:""},ifSearchBtn:!0,ifSearch:!1,size:5,item:{},publish:{},activeName:"6",table:{content:[]},loading:!0,currentPage:1,name:"6"}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"purchase"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.$goback}},[t._v("返回")]),t._v(" "),a("div",{staticClass:"info"},[a("el-row",{staticClass:"mt20",staticStyle:{"font-size":"16px","font-weight":"bold"}},[a("el-tag",[t._v("基本信息：")])],1),t._v(" "),a("el-row",{staticStyle:{"padding-left":"20px"},attrs:{type:"flex",justify:"space-around"}},[a("el-col",{staticClass:"ovw-h mr20",attrs:{span:6}},[a("p",{staticClass:"fl"},[t._v("图片：")]),t._v(" "),a("p",{staticClass:"fl",staticStyle:{width:"calc(100% - 100px)"}},[a("img",{staticStyle:{height:"77px",width:"auto !important"},attrs:{src:t.item.imgUrl,alt:"图例"}})])]),t._v(" "),a("el-col",{staticClass:"ovw-h mr20",attrs:{span:6}},[a("p",[t._v("项目名称："+t._s(t.item.projectName))]),t._v(" "),a("p",[t._v("客户："+t._s(t.item.customerUserName))])]),t._v(" "),a("el-col",{staticClass:"ovw-h mr20",attrs:{span:6}},[a("p",{staticClass:"out",attrs:{title:t.item.partName}},[t._v("制品名称："+t._s(t.item.partName))]),t._v(" "),a("p",[t._v("制品尺寸："+t._s(t.item.partNo))])]),t._v(" "),a("el-col",{staticClass:"ovw-h mr20",attrs:{span:6}},[a("p",[t._v("模具编号："+t._s(t.item.mouldNo))])])],1),t._v(" "),a("hr"),t._v(" "),a("el-row",{staticClass:"mt20 mb20",staticStyle:{"font-size":"16px","font-weight":"bold"}},[a("el-tag",[t._v("发布统计：")])],1),t._v(" "),a("el-col",{staticClass:"ovw-h",staticStyle:{"padding-left":"20px"},attrs:{span:24}},[t._v("设计部发布采购零件总数："+t._s(t.publish.purchaseNumTotal))]),t._v(" "),a("el-row",{staticStyle:{"padding-left":"20px"},attrs:{type:"flex",justify:"space-around"}},[a("el-col",{staticClass:"ovw-h"},[a("p",[t._v("模胚数量："+t._s(t.publish.mouldBaseNum))]),t._v(" "),a("p",[t._v("委外零件："+t._s(t.publish.subNumber))]),t._v(" "),a("p",[t._v("不合格物料："+t._s(t.publish.unqualifiedNum))])]),t._v(" "),a("el-col",[a("p",[t._v("前(上)模数量："+t._s(t.publish.mouldFrontNum))]),t._v(" "),a("p",[t._v("已下单物料："+t._s(t.publish.mouldAlreadOutNum))]),t._v(" "),a("p",[t._v("未入库物料："+t._s(t.publish.mouldNoArrivedNum))])]),t._v(" "),a("el-col",[a("p",[t._v("后(下)模数量："+t._s(t.publish.mouldAfterNum))]),t._v(" "),a("p",[t._v("采购长周期："+t._s(t.publish.mouldLongCirceNum))]),t._v(" "),a("p",[t._v("已入库物料："+t._s(t.publish.mouldWareHouseNum))])]),t._v(" "),a("el-col",[a("p",[t._v("标准件数量："+t._s(t.publish.mouldStandardNum))])])],1),t._v(" "),a("hr")],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"countDetail",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-tabs",{staticClass:"mt20 posr tab-purchase",attrs:{id:"tab-purchase",type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.ifSearchBtn?a("el-button",{staticClass:"posa",attrs:{id:"search-purchase",size:"mini",type:"primary",icon:"el-icon-search",plain:"",title:"搜索"},on:{click:t.ifSearchClick}},[t._v("搜索")]):t._e(),t._v(" "),t.ifSearch?a("div",{staticClass:"section-search mb20 mt20"},[a("el-row",{staticClass:"mb20"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"fl mr20"},[a("span",[t._v("物料编码：")]),t._v(" "),a("el-input",{staticStyle:{width:"auto"},model:{value:t.search.code,callback:function(e){t.$set(t.search,"code",e)},expression:"search.code"}})],1),t._v(" "),a("div",{staticClass:"fl mr20"},[a("span",[t._v("物料名称：")]),t._v(" "),a("el-input",{staticStyle:{width:"auto"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),t._v(" "),a("el-button",{staticClass:"fl",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.searchList(t.search)}}})],1)],1),t._v(" "),a("hr")],1):t._e(),t._v(" "),a("el-tab-pane",{attrs:{label:"主料",name:"6"}},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.table.content,border:"","max-height":"800",size:"small","header-cell-class-name":"header_cell table_header_shadow","tooltip-effect":"light"}},[a("el-table-column",{attrs:{prop:"",label:"物料编码",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.partCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseOrderNo",label:"采购单号",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"singlePurchase",label:"采购批次",width:"80","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partName",label:"物料名称",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"materialCategory",label:"物料类别",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("0"===e.row.materialCategory?"模胚":"1"===e.row.materialCategory?"前(上)模":"2"===e.row.materialCategory?"后(下)模":"标准件"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"来源",width:"80","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"prescribedProcurementCycle",label:"计划采购周期",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"procurementTime",label:"提交时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"estimatedReturnTime",label:"预计到厂时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"actualReturnTime",label:"实际到厂时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partSpecification",label:"规格型号",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseQuantity",label:"数量",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partMaterial",label:"材质",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseName",label:"采购商家",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partsBrand",label:"品牌","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"originalCustomMade",label:"ORI/STD"}})],1)],1),t._v(" "),t._e(),t._v(" "),a("el-tab-pane",{attrs:{label:"长周期",name:"2"}},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.table.content,border:"","max-height":"800",size:"small","header-cell-class-name":"header_cell table_header_shadow","tooltip-effect":"light"}},[a("el-table-column",{attrs:{prop:"",label:"物料编码",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.partCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"partName",label:"物料名称",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"materialCategory",label:"物料类别",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("0"===e.row.materialCategory?"模胚":"1"===e.row.materialCategory?"前(上)模":"2"===e.row.materialCategory?"后(下)模":"标准件"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"来源",width:"80","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"prescribedProcurementCycle",label:"计划采购周期",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"procurementTime",label:"提交时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"estimatedReturnTime",label:"预计到厂时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"actualReturnTime",label:"实际到厂时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partSpecification",label:"规格型号",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseQuantity",label:"数量",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partMaterial",label:"材质",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseName",label:"采购商家",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partsBrand",label:"品牌","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"originalCustomMade",label:"ORI/STD"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"委外单",name:"4"}},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.table.content,border:"","max-height":"800",size:"small","header-cell-class-name":"header_cell table_header_shadow","tooltip-effect":"light"}},[a("el-table-column",{attrs:{prop:"",label:"物料编码",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.partCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"partName",label:"物料名称",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"materialCategory",label:"物料类别",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("0"===e.row.materialCategory?"模胚":"1"===e.row.materialCategory?"前(上)模":"2"===e.row.materialCategory?"后(下)模":"标准件"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"procurementTime",label:"提交时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"estimatedReturnTime",label:"预计到厂时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"actualReturnTime",label:"实际到厂时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partSpecification",label:"规格型号",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseQuantity",label:"数量",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partMaterial",label:"材质",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseName",label:"采购商家",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partsBrand",label:"品牌","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"originalCustomMade",label:"ORI/STD","show-overflow-tooltip":""}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"未入库",name:"3"}},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.table.content,border:"","max-height":"800",size:"small","header-cell-class-name":"header_cell table_header_shadow","tooltip-effect":"light"}},[a("el-table-column",{attrs:{prop:"",label:"物料编码",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.partCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"partName",label:"物料名称",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"materialCategory",label:"物料类别",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("0"===e.row.materialCategory?"模胚":"1"===e.row.materialCategory?"前(上)模":"2"===e.row.materialCategory?"后(下)模":"标准件"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"puchaseOrderNature",label:"来源",width:"80","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaserMenberName",label:"采购负责人",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"procurementTime",label:"提交时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"estimatedReturnTime",label:"预计到厂时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partSpecification",label:"规格型号",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseQuantity",label:"数量",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partMaterial",label:"材质",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseName",label:"采购商家",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partsBrand",label:"品牌","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"originalCustomMade",label:"ORI/STD","show-overflow-tooltip":""}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"已入库",name:"5"}},[a("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.table.content,border:"","max-height":"800",size:"small","header-cell-class-name":"header_cell table_header_shadow","tooltip-effect":"light"}},[a("el-table-column",{attrs:{prop:"",label:"物料编码",width:"180","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.partCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"partName",label:"物料名称",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"materialCategory",label:"物料类别",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("0"===e.row.materialCategory?"模胚":"1"===e.row.materialCategory?"前(上)模":"2"===e.row.materialCategory?"后(下)模":"标准件"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"procurementTime",label:"提交时间","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"estimatedReturnTime",label:"预计到厂时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"warehousingTime",label:"实际入库时间",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partSpecification",label:"规格型号",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseQuantity",label:"数量",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partMaterial",label:"材质",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"purchaseName",label:"采购商家",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"partsBrand",label:"品牌","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"originalCustomMade",label:"ORI/STD","show-overflow-tooltip":""}})],1)],1)],1),t._v(" "),t.table.totalCount?a("el-pagination",{staticClass:"mt20 fr",attrs:{background:!1,"current-page":t.currentPage,"page-size":t.size,layout:"total, prev, pager, next",total:t.table.totalCount},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}):t._e()],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(i,p,!1,function(t){a("dOHj")},"data-v-5b194fb2",null);e.default=c.exports},dOHj:function(t,e){}});